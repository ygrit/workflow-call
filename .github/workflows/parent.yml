name: Parent Workflow

on:
  workflow_dispatch:
    inputs:
      user_name:
        description: "Nom de l'utilisateur"
        required: true
        default: "Charlie"
      moment:
        description: "Moment de la journ√©e (morning, evening, day)"
        required: false
        default: "day"

jobs:
  call-child:
    uses: ./.github/workflows/child.yml
    with:
      name: ${{ inputs.user_name }}
      time: ${{ inputs.moment }}
    secrets: inherit
    
  cleanup:
    runs-on: ubuntu-latest
    needs: call-child
    steps:
      - name: Show greeting from child
        run: echo "The child said: ${{ needs.call-child.outputs.greeting-message }}"
      - run: echo "Cleaning up after the greeting..."